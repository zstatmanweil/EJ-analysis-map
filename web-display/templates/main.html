<!DOCTYPE html>
<html>
	<head>
		<title>Spatial environmental justice analysis</title>
		<script src='https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
		<link href='https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
    </head>

    <body>
		<h1>Safe Drinking Water Act (SDWA) Compliance in New Jersey (2012-2016)</h1>
		<div id='map' style='width: 100%; height: 400px;'></div>
        <div id='menu'>
        <input id='streets-v11' type='radio' name='rtoggle' value='streets' checked='checked'>
        <label for='streets'>streets</label>
        <input id='satellite-v9' type='radio' name='rtoggle' value='satellite'>
        <label for='satellite'>satellite</label>
       </div>

        <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v3.1.4/mapbox-gl-geocoder.min.js'></script>
        <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v3.1.4/mapbox-gl-geocoder.css' type='text/css' />
        <div id='map'></div>

        <script>
		mapboxgl.accessToken = 'pk.eyJ1IjoienN0YXRtYW53ZWlsIiwiYSI6ImNqbWY3b3V2cjAyMWUzcXBmNXRzdHNnOWEifQ.E-JUGH3ab30ya_NXealg_A';

        // Set bounds
        var bounds = [
            [-125.339515, 23.089636], // Southwest Coordinates
            [-62.346295, 50.046593] // Norteast Coordinates
            ];
        // Initialize map
        var map = new mapboxgl.Map({
	        container: 'map',
            style: 'mapbox://styles/mapbox/streets-v11',
	   	    center: [-74.385210, 40.118365], // long, lat
            zoom: 6.3,
        //    maxBounds: bounds // Sets bounds as max
        });
        // Toggle between styles
        var layerList = document.getElementById('menu');
        var inputs = layerList.getElementsByTagName('input');

        function switchLayer(layer) {
            var layerId = layer.target.id;
            map.setStyle('mapbox://styles/mapbox/' + layerId);
        }
        for (var i = 0; i < inputs.length; i++) {
            inputs[i].onclick = switchLayer;
        }
        // Add Geocoder
        map.addControl(new MapboxGeocoder({
            accessToken: mapboxgl.accessToken
        }));
        // Add navigation control
        map.addControl(new mapboxgl.NavigationControl());
        function mapReset() {

        }

        map.on('style.load', function() {
            mapReset();
            map.addSource("NJ", {
                type: "geojson",
                data: 'https://raw.githubusercontent.com/zstatmanweil/EJ-analysis-map/web/web-display/data/NJ_boundary.geojson'
                });

            map.addLayer({
               'id': 'new_jersey',
               'type': 'line',
               'source': 'NJ',
               'layout': {},
               'paint': {
                   'line-color': '#070705'
                }
           });
        });
        </script>
	</body>
</html>
